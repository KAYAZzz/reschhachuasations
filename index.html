<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Hacuasation Hall of Fame</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      overflow-x: hidden;
      font-family: 'Inter', sans-serif;
      background: #0b0616;
    }

    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 1.5rem;
    }

    .gallery-card {
      background-color: rgba(33, 23, 54, 0.85);
      border-radius: 1rem;
      overflow: hidden;
      box-shadow: 0 0 20px rgba(167, 139, 250, 0.25);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      display: flex;
      flex-direction: column;
      align-items: center;
      cursor: pointer;
    }

    .gallery-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 0 25px rgba(167, 139, 250, 0.4);
    }

    .gallery-card img {
      width: 100%;
      height: auto;
      display: block;
    }

    .gallery-card p {
      text-align: center;
      padding: 0.75rem;
      font-size: 0.9rem;
      color: #d1c4f7;
      width: 100%;
      background-color: rgba(18, 10, 32, 0.8);
    }

    /* Fullscreen viewer */
    #imageModal {
      display: none;
      position: fixed;
      z-index: 50;
      inset: 0;
      background: rgba(0, 0, 0, 0.9);
      justify-content: center;
      align-items: center;
    }

    #imageModal img {
      max-width: 90%;
      max-height: 90%;
      border-radius: 1rem;
    }

    #imageModal:target {
      display: flex;
    }

    .close-btn {
      position: absolute;
      top: 20px;
      right: 30px;
      font-size: 2rem;
      color: white;
      cursor: pointer;
    }

    /* Liquid Chrome background */
    #liquidChromeBackground {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: -1;
      overflow: hidden;
    }
  </style>

  <!-- OGL dependency for Liquid Chrome -->
  <script type="module">
    import { Renderer, Program, Mesh, Triangle } from 'https://esm.sh/ogl';

    window.addEventListener('DOMContentLoaded', () => {
      const container = document.createElement('div');
      container.id = 'liquidChromeBackground';
      document.body.appendChild(container);

      const renderer = new Renderer({ antialias: true });
      const gl = renderer.gl;
      container.appendChild(gl.canvas);

      const vertex = `
        attribute vec2 position;
        attribute vec2 uv;
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = vec4(position, 0.0, 1.0);
        }`;

      const fragment = `
        precision highp float;
        uniform float uTime;
        uniform vec3 uResolution;
        varying vec2 vUv;
        vec4 render(vec2 uv) {
          vec2 p = (2.0 * uv - 1.0) * vec2(uResolution.x / uResolution.y, 1.0);
          for (float i = 1.0; i < 10.0; i++){
              p.x += 0.3 / i * cos(i * 3.0 * p.y + uTime);
              p.y += 0.3 / i * sin(i * 3.0 * p.x + uTime);
          }
          vec3 color = vec3(0.4, 0.1, 0.8) / abs(sin(uTime - p.y - p.x));
          return vec4(color, 1.0);
        }
        void main() {
          gl_FragColor = render(vUv);
        }`;

      const program = new Program(gl, {
        vertex,
        fragment,
        uniforms: {
          uTime: { value: 0 },
          uResolution: { value: new Float32Array([window.innerWidth, window.innerHeight, window.innerWidth / window.innerHeight]) }
        }
      });

      const mesh = new Mesh(gl, { geometry: new Triangle(gl), program });

      function resize() {
        renderer.setSize(window.innerWidth, window.innerHeight);
        program.uniforms.uResolution.value = new Float32Array([gl.canvas.width, gl.canvas.height, gl.canvas.width / gl.canvas.height]);
      }
      window.addEventListener('resize', resize);
      resize();

      requestAnimationFrame(function update(t) {
        requestAnimationFrame(update);
        program.uniforms.uTime.value = t * 0.001 * 0.5;
        renderer.render({ scene: mesh });
      });
    });
  </script>
</head>

<body class="text-gray-100 p-6 sm:p-12">
  <header class="text-center mb-12">
    <h1 class="text-5xl sm:text-6xl font-extrabold tracking-tight text-purple-400 mb-3">
      The Hacuasation Hall of Fame
    </h1>
    <p class="text-lg text-gray-300">Every glorious hacuasation and achievement, preserved forever.</p>
  </header>

  <main class="max-w-7xl mx-auto">
    <div id="loading" class="flex flex-col items-center justify-center py-24 text-center">
      <svg class="animate-spin h-10 w-10 border-4 border-t-purple-400 rounded-full mb-4"></svg>
      <p class="text-gray-400 text-xl">Loading images...</p>
    </div>

    <div id="gallery" class="gallery-grid hidden"></div>
  </main>

  <!-- Fullscreen image modal -->
  <div id="imageModal">
    <span class="close-btn" onclick="closeModal()">&times;</span>
    <img id="modalImg" src="" alt="Fullscreen">
  </div>

  <script>
    const REPO_OWNER = 'KAYAZzz';
    const REPO_NAME = 'reschhachuasations';
    const FOLDER_NAME = 'Screenshots';
    const MAX_SCREENSHOTS = 50;

    const buildImageUrl = (filename) =>
      `https://raw.githubusercontent.com/${REPO_OWNER}/${REPO_NAME}/main/${FOLDER_NAME}/${filename}`;

    const IMAGE_FILENAMES = Array.from({ length: MAX_SCREENSHOTS }, (_, i) => `${i + 1}.png`);
    const gallery = document.getElementById('gallery');
    const loading = document.getElementById('loading');
    const modal = document.getElementById('imageModal');
    const modalImg = document.getElementById('modalImg');

    const loadImages = () => {
      let loaded = 0;
      let success = 0;

      IMAGE_FILENAMES.forEach((filename) => {
        const img = new Image();
        img.src = buildImageUrl(filename);
        img.alt = filename;

        img.onload = () => {
          const card = document.createElement('div');
          card.className = 'gallery-card';
          card.innerHTML = `
            <img src="${img.src}" alt="${filename}">
            <p>${filename}</p>
          `;
          card.onclick = () => openModal(img.src);
          gallery.appendChild(card);
          success++;
          if (++loaded === IMAGE_FILENAMES.length) showGallery(success);
        };

        img.onerror = () => {
          if (++loaded === IMAGE_FILENAMES.length) showGallery(success);
        };
      });
    };

    const showGallery = (success) => {
      loading.remove();
      gallery.classList.remove('hidden');
      if (success === 0) {
        const msg = document.createElement('p');
        msg.className = 'text-center text-red-400 text-lg';
        msg.textContent = 'No images could be loaded. Please check your repository visibility.';
        gallery.parentNode.appendChild(msg);
      }
    };

    function openModal(src) {
      modalImg.src = src;
      modal.style.display = 'flex';
    }

    function closeModal() {
      modal.style.display = 'none';
    }

    window.onload = loadImages;
  </script>
</body>
</html>
